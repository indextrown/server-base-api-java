# -----------------------------------------------------------
# 🔹 1. 베이스 이미지 선택
#    - eclipse-temurin:17-jdk-jammy : Java 17 JDK + Ubuntu 기반
#    - Spring Boot 3.x 이상은 Java 17 권장
# -----------------------------------------------------------
FROM eclipse-temurin:17-jdk-jammy

# -----------------------------------------------------------
# 🔹 2. 컨테이너 내부 작업 디렉토리 설정
#    - 이후 COPY, RUN 등 모든 명령은 /app 기준으로 실행됨
# -----------------------------------------------------------
WORKDIR /app

# -----------------------------------------------------------
# 🔹 3. JAR 파일을 컨테이너 내부로 복사
#    - build/libs/*.jar : Gradle로 빌드된 JAR 경로
#    - app.jar 라는 이름으로 컨테이너에 저장
# -----------------------------------------------------------
COPY build/libs/*.jar app.jar

# -----------------------------------------------------------
# 🔹 4. 컨테이너 기본 시간대를 한국(서울)로 설정
#    - 로그/시간 계산이 한국 기준으로 맞게 나옴
# -----------------------------------------------------------
ENV TZ=Asia/Seoul

# -----------------------------------------------------------
# 🔹 5. Spring Boot 서버가 사용하는 포트 노출
#    - 기본적으로 Spring Boot는 8080 포트 사용
# -----------------------------------------------------------
EXPOSE 8080

# -----------------------------------------------------------
# 🔹 6. 컨테이너 시작 시 실행할 명령
#    - java -jar app.jar 실행
#    - ENTRYPOINT는 컨테이너 메인 프로세스
# -----------------------------------------------------------
ENTRYPOINT ["java","-jar","app.jar"]
